# For more information about tox, see https://tox.readthedocs.io/en/latest/
[tox]
isolated_build = True
envlist = py{38,39,310}
toxworkdir=/tmp/.tox

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310

[gh-actions:env]
PLATFORM =
    ubuntu-latest: linux
    macos-latest: macos
    windows-latest: windows

[testenv]
passenv = DISPLAY XAUTHORITY
description = Run unit-testing
deps =
    pytest
    coverage
    pytest-cov
    pytest-qt
    pyqt5
    poetry
commands =
    poetry install
    pytest -v --color=yes --cov=ultrack --cov-report=xml

[testenv:lint]
description = Runs all linting tasks
deps =
    black
commands =
    black .

# [testenv:docs]
# description = Builds documentation
# changedir = docs
# ultrack =
#     -r docs/requirements.txt
# commands =
#     sphinx-build -M html source build
